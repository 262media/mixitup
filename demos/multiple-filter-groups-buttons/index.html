<!DOCTYPE html>
<html>
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <link href="../reset.css" rel="stylesheet"/>
        <link href="./style.css" rel="stylesheet"/>

        <title>MixItUp Demo - Basic</title>
    </head>
    <body>
        <div class="controls">
            <div class="controls-group" data-ref="control-group">
                <button type="button" class="control" data-ref="control" data-value=".green">Green</button>
                <button type="button" class="control" data-ref="control" data-value=".blue">Blue</button>
                <button type="button" class="control" data-ref="control" data-value=".pink">Pink</button>
            </div>

            <div class="controls-group" data-ref="control-group">
                <button type="button" class="control" data-ref="control" data-value=".triangle">Triangle</button>
                <button type="button" class="control" data-ref="control" data-value=".circle">Circle</button>
                <button type="button" class="control" data-ref="control" data-value=".square">Square</button>
            </div>

            <button type="button" class="control" data-ref="button-reset">Reset</button>
        </div>

        <div class="container">
            <div class="mix green circle"></div>
            <div class="mix green triange"></div>
            <div class="mix blue square"></div>
            <div class="mix pink circle"></div>
            <div class="mix green circle"></div>
            <div class="mix blue square"></div>
            <div class="mix pink triangle"></div>
            <div class="mix blue square"></div>

            <div class="gap"></div>
            <div class="gap"></div>
            <div class="gap"></div>
        </div>

        <script src="../mixitup.min.js"></script>

        <script>
            var containerEl = document.querySelector('.container');
            var controlsEl  = document.querySelector('.controls');

            var MultiFilter = function(root) {
                this.dom    = new Dom(root);
                this.groups = [];
            };

            MultiFilter.Dom = function(root) {
                this.root   = root;
                this.groups = [];
            };

            MultiFilter.Group = function() {
                this.filters = [];
            };

            MultiFilter.Filter = function() {
                var _isActive = false;

                this.el       = null;
                this.selector = '';
                this.isActive = false;

                Object.defineProperty(this, 'isActive', {
                    get: function() {
                        return _isActive;
                    },
                    set: function(value) {
                        this.el.classList[value ? 'add' : 'remove']('control-active');

                        _isActive = value;
                    }
                });
            };

            MultiFilter.prototype.init = function() {
                this.cacheDom();
                this.indexGroups();
            };

            MultiFilter.prototype.cacheDom = function() {
                this.dom.groups = this.dom.root.querySelectorAll('[data-ref="control-group"]');
            };

            MultiFilter.prototype.indexGroups = function() {
                var i;
                var groupEl;
                var group;

                for (i = 0; i < this.dom.groups.length; i++) {
                    groupEl = this.dom.groups[i];
                    group = new MultiFilter.Group();

                    this.indexFilters(group, groupEl);

                    this.groups.push(group)
                }
            };


            var mixer = mixitup(containerEl);

            var MultiFilter = new MultiFilter(controlsEl)
        </script>
    </body>
</html>